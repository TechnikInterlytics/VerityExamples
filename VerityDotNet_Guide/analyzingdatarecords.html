
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Analyze Data Records &#8212; VerityDotNet</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=f51f75df"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'analyzingdatarecords';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Normalize &amp; Enrich Data Records" href="normalizeenrichdatarecords.html" />
    <link rel="prev" title="Functions" href="functions.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">VerityDotNet</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="README.html">
    Readme
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="transforms.html">
    Transforms
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="objects.html">
    Objects
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="functions.html">
    Functions
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="#">
    Analyze Data Records
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="normalizeenrichdatarecords.html">
    Normalize & Enrich Data Records
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="compareresults.html">
    Compare Results in Jupyter
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="license.html">
    License
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="support.html">
    Support
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="README.html">
    Readme
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="transforms.html">
    Transforms
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="objects.html">
    Objects
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="functions.html">
    Functions
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Analyze Data Records
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="normalizeenrichdatarecords.html">
    Normalize & Enrich Data Records
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="compareresults.html">
    Compare Results in Jupyter
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="license.html">
    License
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="support.html">
    Support
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Analyze Data Records</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="analyze-data-records">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Analyze Data Records</a><a class="headerlink" href="#analyze-data-records" title="Link to this heading">#</a></h1>
<p>Perform a deep inspection of data sets and use the muiti-faceted results to evaluate the
quality, conformance and presence of errors.</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#analyze-data-records" id="id1">Analyze Data Records</a></p>
<ul>
<li><p><a class="reference internal" href="#goal" id="id2">Goal</a></p></li>
<li><p><a class="reference internal" href="#objectives" id="id3">Objectives</a></p></li>
<li><p><a class="reference internal" href="#practice-continual-improvement" id="id4">Practice Continual Improvement</a></p></li>
<li><p><a class="reference internal" href="#example" id="id5">Example</a></p></li>
<li><p><a class="reference internal" href="#multi-threading" id="id6">Multi_Threading</a></p></li>
<li><p><a class="reference internal" href="#next" id="id7">Next</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="goal">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Goal</a><a class="headerlink" href="#goal" title="Link to this heading">#</a></h2>
<p>The goal of analysis is to characterize data to know its structure, range of values,
and presence of anomalies in relation to what it should be as defined by its architecture.
Ideally, the documentation would describe the details of how it was collected, stored, and
the meaning of the data in the context of its intended use. In this ideal case, unit tests could be
made to automatically measure quality metrics both as the data is received and processed, and
as it is distributed and used. Unfortunately, this ideal situation rarely exists and we are forced
to manage data with uncertain quality, pedigree, and trustworthiness. When the use can tolerate
imperfect data then this is not much of a problem. However, we now have increasingly stringent needs for
better data to feed Artificial Intelligence (AI), Data Science (DataSci), and more sophisticated
forecasting models in financial markets, global supply chain, consumer activity, and many others.</p>
</section>
<section id="objectives">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Objectives</a><a class="headerlink" href="#objectives" title="Link to this heading">#</a></h2>
<p>We have learned from in-depth analysis and thorough reconstruction of data sets across many fields
and types of data systems that there are several specific types of anomalies that frequenetly exist and
go undetected by even the most modern tools. Part of this expert assessment included following and measuring
the impact of the imperfect data on the end-use business activities for how outcome errors impacted
decision making, audit, compliance, analytics, forecast accuracy, etc. From this we created a combined
human expert and big data Machine Learning (ML) technology to filter through all data to find several types
of problems and reliable approaches to correcting them automatically. This led to the following key objectives
of the VerityX (X denotes both the Python and DotNet libraries) analysis process:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>capture details of field datatype and format for all records and visibly showcase even infrequent variations.</dt><dd><ul>
<li><p>many tools limit the depth and breadth of records analyzed and variations captured due to processing, memory, and storage limitations.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>capture complete range of values for each field and emphasize low frequency instances since this is how anomalies can be quickly discovered.</p></li>
<li><p>capture complete range of values for combinations of several fields</p></li>
<li><p>track number of field values parsed per record as key indicator of presence of extra delimiters and line feeds
that are not apparent during human review but which cause parsing code to break what should be a single record
into multiple partial records or generate more field values than there are fields. This is surprisingly common
in many mid and large size data systems.</p></li>
<li><p>provide automated correction algorithms that repair all of the above problems with minimal required data
architecture and engineering which tends to be so complicated and labor intensive that it often lags
actual data causing serious ‘technical debt’.</p></li>
<li><p>provide multiple views and types of results into data quality and problems since real world data teams are typically
too constrained in time and personnel to probe every data set, system, and operation in detail.</p></li>
</ul>
</div></blockquote>
</section>
<section id="practice-continual-improvement">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Practice Continual Improvement</a><a class="headerlink" href="#practice-continual-improvement" title="Link to this heading">#</a></h2>
<p>VerityX is designed for iteratively improving data set quality and enriching. It is counter-productive to attempt
to define every detail of a data set’s structure, meaning, and use case rules in one lengthy requirements gathering process.
It is too complicated, laborious and prone to error. Instead, characterize data with an initial deep assessment and use
the results to discover what is correct, what is a problem, and what needs to be clarified. Adjusting the VerityX job
with ever increasing specificity is purposefully easy to do, and a core design principle to allow all team members including
non-technical business workers and managers to review the business rules and resulting outcomes.</p>
<p>A typical workflow will be:</p>
<ol class="arabic">
<li><p>Organize source data file(s) and use a text editor to view the top of the file to determine its basic structure for:</p>
<blockquote>
<div><ul class="simple">
<li><p>is there a header line of field titles</p></li>
<li><p>what delimiter is used</p></li>
<li><p>are there comment lines starting with either # or //</p></li>
<li><p>are there empty lines</p></li>
<li><p>are there any obvious problems like lines that are much too short or long, odd characters that do not belong in the type of data, values that are inconsistent compared to most records</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Create a small application (Python or C# DotNet depending on library used) to read in the file’s records,
provide settings, define fields. See examples on support web site and the sample below.</p></li>
<li><p>Iterate: Analyze, Review, Adjust</p>
<ol class="arabic simple">
<li><p>submit data to analysis function</p></li>
<li><p>review results: datatype and format distributions per field, unique values per field, record size distribution, special characters</p></li>
<li><p>adjust Field definitions to include datatypes and formats based on results to improve granularity of analysis results</p></li>
</ol>
</li>
<li><p>Iterate: Remediate, Normalize, Enrich</p>
<ol class="arabic simple">
<li><p>define transforms, add enrichment fields, normalize value ranges</p></li>
<li><p>submit data to remediation function</p></li>
<li><p>review result statistics and corrected, normalized, enriched output data: view with text editor, load into Excel, use Jupyter Notebook template</p></li>
</ol>
</li>
<li><p>Use new data in end use case and assess results</p>
<blockquote>
<div><ul class="simple">
<li><p>analytics: pick a few samples and thoroughly review to see if values and category and numeric aggregations make sense and agree with known outcomes</p></li>
<li><p>Data Science: check statistical scalars and distributions to predictions and historical data</p></li>
<li><p>AI/ML: include in models and review changes, sensitivities, calibration to prior known test cases, reasonableness of future predictions</p></li>
</ul>
</div></blockquote>
</li>
</ol>
</section>
<section id="example">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Example</a><a class="headerlink" href="#example" title="Link to this heading">#</a></h2>
<aside class="topic">
<p class="topic-title">Sample Code</p>
<p>Various samples including this one are available at the Technik Interlytics support web site</p>
</aside>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>We use C# in Visual Studio 2022 (VS2022) on Windows 11.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Open VS2022</p></li>
<li><p>create a new console solution for Target framework .Net 6.0</p></li>
<li><p>in Program.cs, set namespace, public class Program, and a Main method</p></li>
<li><p>test by running with F5 key. You should see a console open with the line “STARTING VERITYDOTNET_EXAMPLES”</p></li>
</ol>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="n">VerityDotNet_Examples</span> <span class="p">{</span>
  <span class="n">public</span> <span class="k">class</span> <span class="nc">Program</span> <span class="p">{</span>
    <span class="n">static</span> <span class="n">void</span> <span class="n">Main</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">&quot;STARTING VERITYDOTNET_EXAMPLES&quot;</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="n">catch</span> <span class="p">(</span><span class="ne">Exception</span> <span class="n">ex</span><span class="p">)</span> <span class="p">{</span> <span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">ToString</span><span class="p">());</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Add new class Analyze.cs and change to be internal static</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="n">VerityDotNet_Examples</span> <span class="p">{</span>
  <span class="n">internal</span> <span class="n">static</span> <span class="k">class</span> <span class="nc">Analyze</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Use Tools / Nuget Package Manager / Manage NuGet Packages for Solution and enter ‘VerityDotNet’ into BROWSE</p></li>
<li><p>Select VerityDotNet by Technik Interlytics and then your project in the list in right side pane and click INSTALL</p></li>
<li><p>Read and accept the License. Carefully review the license requirements especially on it not being open source and therefore not usable in an open source project.</p></li>
<li><p>Go to Analyze.cs and add ‘using VerityDotNet’</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">VerityDotNet</span><span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic simple" start="11">
<li><p>create a folder ‘data’ under your project in Solution Explorer</p></li>
<li><p>obtain sample data files from Technik Interlytics support and add to this ‘data’ folder</p>
<ul class="simple">
<li><p>FIPS_stateCountyCodes.dat</p></li>
<li><p>IRSMigration_WithErrors_Hdr.csv</p></li>
<li><p>IRSMigration_WithErrors_NoBrk_Hdr.csv</p></li>
<li><p>lookup_3field_test.dat</p></li>
<li><p>StateAbbrfromFIPS_lookup.dat</p></li>
<li><p>StateNamefromFIPS_lookup.dat</p></li>
<li><p>USStatesNormalize.dat</p></li>
</ul>
</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="_images/solexplorewithdata.png" src="_images/solexplorewithdata.png" />
<section id="read-data-file">
<h3>Read Data File<a class="headerlink" href="#read-data-file" title="Link to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Set variables for file handling
curDir = AppContext.BaseDirectory;
dirDelim = curDir.Contains(&#39;\\&#39;) ? &quot;\\&quot; : &quot;/&quot;;
if (!curDir.EndsWith(dirDelim)) curDir += dirDelim;
txt = dirDelim + &quot;bin&quot; + dirDelim; //remove bin part of path if there
if (curDir.Contains(txt)) {
  curDir = curDir[..(curDir.IndexOf(txt) + 1)];
}
curDir += &quot;data&quot; + dirDelim;
fileName = &quot;IRSMigration_WithErrors_Hdr.csv&quot;;
fileUri = curDir + fileName;
if (!File.Exists(fileUri)) throw new Exception($&quot;file not found: {fileUri}&quot;);
delimChar = &quot;,&quot;;
//read data file and make list of Field objects and source records
using (StreamReader sr = new StreamReader(fileUri)) {
  while (!sr.EndOfStream) {
    lineIn = sr.ReadLine();
    if (lineIn == null) break;
    if (lineIn.Length &gt; 0 &amp;&amp; !lineIn.StartsWith(&quot;//&quot;) &amp;&amp; !lineIn.StartsWith(&quot;#&quot;)) {
      nLine++;
      if (nLine == 1) {
        if (!lineIn.Contains(delimChar)) throw new Exception($&quot;first line does not have field delimiter: {delimChar}&quot;);
        if (lineIn.Contains(DQ)) lineIn = lineIn.Replace(DQ, &quot;&quot;);
        temp = lineIn.Split(delimChar).ToList&lt;string&gt;();
        for (int i = 0; i &lt; temp.Count; i++) {
          txt = temp[i].Trim();
          srcFields.Add(new Field() {
            title = txt,
          });
          qualityAnalysis.hashFields[txt.ToLowerInvariant()] = srcFields.Count - 1;
        }
      }
      else {
        recs.Add(lineIn);
      }
    }
  }
}
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="add-field-characteristics">
<h3>Add Field Characteristics<a class="headerlink" href="#add-field-characteristics" title="Link to this heading">#</a></h3>
<p>We add some details to the fields to enable greater granularity in analysis results.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">assign</span> <span class="n">datatypes</span> <span class="ow">and</span> <span class="n">formats</span>
<span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">srcFields</span><span class="o">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">fldName</span><span class="o">=</span> <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">ToLowerInvariant</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">fldName</span><span class="o">==</span><span class="s2">&quot;y1_statefips&quot;</span> <span class="o">||</span> <span class="n">fldName</span> <span class="o">==</span> <span class="s2">&quot;y2_statefips&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">datatype</span><span class="o">=</span> <span class="s2">&quot;string&quot;</span><span class="p">;</span>
    <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">fmt_strlen</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">fldName</span><span class="o">==</span><span class="s2">&quot;y1_state&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">datatype</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span><span class="p">;</span>
    <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">fmt_strlen</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">fmt_strcase</span> <span class="o">=</span> <span class="s2">&quot;upper&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">fldName</span> <span class="o">==</span> <span class="s2">&quot;y1_state_name&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">datatype</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">fldName</span><span class="o">==</span><span class="s2">&quot;n1&quot;</span> <span class="o">||</span> <span class="n">fldName</span> <span class="o">==</span> <span class="s2">&quot;n2&quot;</span> <span class="o">||</span> <span class="n">fldName</span> <span class="o">==</span> <span class="s2">&quot;agi&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">srcFields</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">datatype</span> <span class="o">=</span> <span class="s2">&quot;int&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="specify-covalues-to-analyze">
<h3>Specify CoValues to Analyze<a class="headerlink" href="#specify-covalues-to-analyze" title="Link to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">add</span> <span class="n">coValue</span><span class="o">.</span> <span class="n">Each</span> <span class="nb">list</span> <span class="n">entry</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">dictionary</span> <span class="k">for</span> <span class="n">a</span> <span class="n">new</span> <span class="n">coValue</span>
<span class="o">//</span><span class="n">which</span> <span class="n">has</span> <span class="n">keys</span> <span class="k">for</span> <span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span> <span class="n">fields</span> <span class="n">to</span> <span class="n">use</span><span class="o">.</span> <span class="n">AnalyzeQuality</span><span class="o">.</span><span class="n">Inspect</span>
<span class="o">//</span><span class="n">method</span> <span class="n">will</span> <span class="n">check</span> <span class="n">title</span> <span class="ow">and</span> <span class="n">then</span> <span class="n">assign</span> <span class="nb">list</span> <span class="n">indices</span>
<span class="n">coValues</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">new</span> <span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">string</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">{</span><span class="s2">&quot;field1&quot;</span><span class="p">,</span> <span class="s2">&quot;y1_state&quot;</span> <span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;field2&quot;</span><span class="p">,</span> <span class="s2">&quot;y1_state_name&quot;</span> <span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;field3&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">},</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="set-parameters-and-do-analysis">
<h3>Set Parameters and Do Analysis<a class="headerlink" href="#set-parameters-and-do-analysis" title="Link to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>//set parameters.
parameters[&quot;isCaseSens&quot;] = &quot;false&quot;;
parameters[&quot;isQuoted&quot;] = &quot;true&quot;; //allows possibility of some quoted field values
parameters[&quot;delim&quot;] = &quot;comma&quot;; // !!! critical to set correct delimiter !!!!
parameters[&quot;maxuv&quot;] = &quot;100&quot;; //override default limit
parameters[&quot;hasHeader&quot;] = &quot;false&quot;; //we removed header line as we read file but could have left it in if desired
parameters[&quot;extractFields&quot;] = &quot;false&quot;; //we have Fields from original file so do not want to auto-extract
parameters[&quot;useThreads&quot;] = &quot;false&quot;; //multi-threading is not used in this example
//perform Verity Analysis.
qualityAnalysis = AnalyzeQuality.Inspect(srcFields, coValues, settings, recs);
if (qualityAnalysis.status.StartsWith(&quot;notok:&quot;)) throw new Exception($&quot;error doing AnalyzeQuality: {qualityAnalysis.status[6..]}&quot;); //always check for error condition
</pre></div>
</div>
</section>
<section id="test-results">
<h3>Test Results<a class="headerlink" href="#test-results" title="Link to this heading">#</a></h3>
<p>There are many characteristics in the result object ‘qualityAnalysis’ but we only show a few examples here. More examples including test routines are
available in the Technik Interlytics support web site. This sections shows validating the results to known outcomes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>n1 = 0;
foreach (long l1 in qualityAnalysis.fieldsErrDatatypeCount) {
  if (l1 &gt; 0) n1++;
}
if (n1 != 3) errs.Add($&quot;incorrect fieldsErrDatatypeCount {n1}/3&quot;);
n1 = 0;
foreach (long l1 in qualityAnalysis.fieldsErrFmtCount) {
  if (l1 &gt; 0) n1++;
}
if (n1 != 3) errs.Add($&quot;incorrect fieldsErrFmtCount {n1}/3&quot;);
if (qualityAnalysis.fieldDatatypeDist.Count != qualityAnalysis.fields.Count) errs.Add($&quot;incorrect fieldDatatypeDist {qualityAnalysis.fieldDatatypeDist.Count}/{qualityAnalysis.fields.Count}&quot;);
if (qualityAnalysis.fieldDatatypeDist[4][&quot;int&quot;]!=998) errs.Add($&quot;incorrect fieldDatatypeDist[4][int] {qualityAnalysis.fieldDatatypeDist[4][&quot;int&quot;]}/998&quot;);
if (qualityAnalysis.fieldDatatypeDist[4][&quot;empty&quot;] != 5) errs.Add($&quot;incorrect fieldDatatypeDist[4][empty] {qualityAnalysis.fieldDatatypeDist[4][&quot;empty&quot;]}/5&quot;);
if (qualityAnalysis.fieldUniqVals.Count != qualityAnalysis.fields.Count) errs.Add($&quot;incorrect fieldUniqVals {qualityAnalysis.fieldUniqVals.Count}/{qualityAnalysis.fields.Count}&quot;);
if (qualityAnalysis.fieldUniqVals[1].Count == 0) errs.Add($&quot;incorrect #fieldUniqVals[1]=0&quot;);
n1 = -1;
for (int i = 0; i &lt; qualityAnalysis.fieldUniqVals[1].Count; i++) {
  if (qualityAnalysis.fieldUniqVals[1][i].uv == &quot;96&quot;) {
    n1 = i; break;
  }
}
if (n1 &lt; 0) errs.Add($&quot;fieldUniqVals[1] missing key=96&quot;);
else if (qualityAnalysis.fieldUniqVals[1][n1].count != 18) errs.Add($&quot;key=96 value wrong in fieldUniqVals[1][{n1}] {qualityAnalysis.fieldUniqVals[1][n1].count}/18&quot;);
if (qualityAnalysis.specCharDist.Count != 4) errs.Add($&quot;incorrect specCharDist {qualityAnalysis.specCharDist.Count}/4&quot;);
if (!qualityAnalysis.specCharDist.ContainsKey(&quot;unicode_8252&quot;)) errs.Add($&quot;missing key=unicode_8252 in specCharDist&quot;);
if (qualityAnalysis.specCharDist[&quot;unicode_8252&quot;]!=1) errs.Add($&quot;incorrect key=unicode_8252 in specCharDist {qualityAnalysis.specCharDist[&quot;unicode_8252&quot;]}/1&quot;);
if (qualityAnalysis.coValues.Count != 1) errs.Add($&quot;incorrect #coValues {qualityAnalysis.coValues.Count}/1&quot;);
if (qualityAnalysis.coValueUniqVals.Count != 1) errs.Add($&quot;incorrect #coValueUniqVals {qualityAnalysis.coValueUniqVals.Count}/1&quot;);
n1 = -1;
for (int i = 0; i &lt; qualityAnalysis.coValueUniqVals[0].Count; i++) {
  if (qualityAnalysis.coValueUniqVals[0][i].uv == &quot;nc_north carolina&quot;) {
    n1 = i; break;
  }
}
if (n1 &lt; 0) errs.Add($&quot;coValueUniqVals[0] missing key=nc_north carolina&quot;);
else if (qualityAnalysis.coValueUniqVals[0][n1].count != 18) errs.Add($&quot;coValueUniqVals[0][{n1}] for key=nc_north carolina wrong {qualityAnalysis.coValueUniqVals[0][n1].count}/18&quot;);
if (qualityAnalysis.fieldQuality.Count != qualityAnalysis.fields.Count) errs.Add($&quot;incorrect fieldQuality {qualityAnalysis.fieldQuality.Count}/{qualityAnalysis.fields.Count}&quot;);
else if (qualityAnalysis.fieldQuality[0] != &quot;95.2&quot;) errs.Add($&quot;incorrect fieldQuality[0] {qualityAnalysis.fieldQuality[0]}/95.2&quot;);
else if (qualityAnalysis.fieldQuality[4] != &quot;98.7&quot;) errs.Add($&quot;incorrect fieldQuality[4] {qualityAnalysis.fieldQuality[4]}/98.7&quot;);
else if (qualityAnalysis.fieldQuality[5] != &quot;97.8&quot;) errs.Add($&quot;incorrect fieldQuality[6] {qualityAnalysis.fieldQuality[5]}/97.8&quot;);
if (errs.Count &gt; 0) {
  Console.WriteLine(&quot;Analyze has errors  ---&gt; FAIL&quot;);
  for (int i = 0; i &lt; errs.Count; i++) {
    Console.WriteLine($&quot;Error {i}:{errs[i]}&quot;);
  }
}
else {
  Console.WriteLine(&quot;Analyze 0 errors  ---&gt; OK&quot;);
}
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>This shows the following output:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TEST</span> <span class="n">ANALYZE</span> <span class="n">QUALITY</span><span class="p">:</span> <span class="n">IRSMigration_WithErrors_Hdr</span><span class="o">.</span><span class="n">csv_20240806T132858</span>
<span class="n">Verity</span> <span class="n">Analysis</span> <span class="n">report</span> <span class="n">at</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span>\<span class="n">CodeDevelopment</span>\<span class="n">VS</span>\<span class="n">TestVerityDotNet</span>\<span class="n">test</span>\<span class="n">IRSMigration_WithErrors_Hdr_report</span><span class="o">.</span><span class="n">dat</span>
<span class="n">Analyze</span> <span class="n">Quality</span> <span class="n">using</span> <span class="n">Fields</span> <span class="mi">0</span> <span class="n">errors</span>  <span class="o">---&gt;</span> <span class="n">OK</span>
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="review-results">
<h3>Review Results<a class="headerlink" href="#review-results" title="Link to this heading">#</a></h3>
<p>This section lists some of the report results.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Console.WriteLine(&quot;Sample Results:&quot;);
Console.WriteLine($&quot;Number records= {qualityAnalysis.numRecs}&quot;);
Console.WriteLine($&quot;Number records errors= {qualityAnalysis.errStats[&quot;numrecserr&quot;]}&quot;);
Console.WriteLine($&quot;Number records datatype errors= {qualityAnalysis.errStats[&quot;numrecserrdatatype&quot;]}&quot;);
Console.WriteLine($&quot;Number records format errors= {qualityAnalysis.errStats[&quot;numrecserrfmt&quot;]}&quot;);
Console.WriteLine($&quot;Number parsing errors Small1= {qualityAnalysis.recParseErrs[&quot;small1&quot;]}&quot;);
Console.WriteLine($&quot;Number parsing errors Small2= {qualityAnalysis.recParseErrs[&quot;small2&quot;]}&quot;);
Console.WriteLine($&quot;Number parsing errors Big= {qualityAnalysis.recParseErrs[&quot;big&quot;]}&quot;);
for (int i = 0; i &lt; qualityAnalysis.fields.Count; i++) {
  Console.WriteLine($&quot;Field Quality {qualityAnalysis.fields[i].title}={qualityAnalysis.fieldQuality[i]} &quot;);
}
Console.WriteLine(&quot;UNIQUE VALUES: Top 5 Per Field&quot;);
for (int i = 0; i &lt; qualityAnalysis.fields.Count; i++) {
  Console.WriteLine($&quot;Field {qualityAnalysis.fields[i].title}&quot;);
  for (int j=0; j&lt;5; j++) {
    if (j &gt;= qualityAnalysis.fieldUniqVals[i].Count) break;
    Console.WriteLine($&quot;UV: {qualityAnalysis.fieldUniqVals[i][j].uv} has {qualityAnalysis.fieldUniqVals[i][j].count} instances&quot;);
  }
}
Console.WriteLine(&quot;UNIQUE VALUES: Bottom 5 Per Field&quot;);
for (int i = 0; i &lt; qualityAnalysis.fields.Count; i++) {
  Console.WriteLine($&quot;Field {qualityAnalysis.fields[i].title}&quot;);
  for (int j = 0; j &lt; 5; j++) {
    n1 = qualityAnalysis.fieldUniqVals[i].Count - 1 - j;
    if (n1 &lt; 0) break;
    Console.WriteLine($&quot;UV: {qualityAnalysis.fieldUniqVals[i][n1].uv} has {qualityAnalysis.fieldUniqVals[i][n1].count} instances&quot;);
  }
}
Console.WriteLine(&quot;SPECIAL CHARACTERS&quot;);
foreach (KeyValuePair&lt;string, long&gt; kv in qualityAnalysis.specCharDist) {
  Console.WriteLine($&quot;SpecChar {kv.Key} has {kv.Value} instances&quot;);
}
Console.WriteLine($&quot;CoValues (20 values max): {qualityAnalysis.coValues[0].title}&quot;);
n1 = 0;
foreach ((string uv, long count) in qualityAnalysis.coValueUniqVals[0]) {
  Console.WriteLine($&quot;{uv}: {count} instances&quot;);
  n1++;
  if (n1 &gt;= 20) break;
}
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>With output:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Sample</span> <span class="n">Results</span><span class="p">:</span>
<span class="n">Number</span> <span class="n">records</span><span class="o">=</span> <span class="mi">1003</span>
<span class="n">Number</span> <span class="n">records</span> <span class="n">errors</span><span class="o">=</span> <span class="mi">19</span>
<span class="n">Number</span> <span class="n">records</span> <span class="n">datatype</span> <span class="n">errors</span><span class="o">=</span> <span class="mi">14</span>
<span class="n">Number</span> <span class="n">records</span> <span class="nb">format</span> <span class="n">errors</span><span class="o">=</span> <span class="mi">9</span>
<span class="n">Number</span> <span class="n">parsing</span> <span class="n">errors</span> <span class="n">Small1</span><span class="o">=</span> <span class="mi">0</span>
<span class="n">Number</span> <span class="n">parsing</span> <span class="n">errors</span> <span class="n">Small2</span><span class="o">=</span> <span class="mi">5</span>
<span class="n">Number</span> <span class="n">parsing</span> <span class="n">errors</span> <span class="n">Big</span><span class="o">=</span> <span class="mi">0</span>
<span class="n">Field</span> <span class="n">Quality</span> <span class="n">y2_statefips</span><span class="o">=</span><span class="mf">95.2</span>
<span class="n">Field</span> <span class="n">Quality</span> <span class="n">y1_statefips</span><span class="o">=</span><span class="mf">95.2</span>
<span class="n">Field</span> <span class="n">Quality</span> <span class="n">y1_state</span><span class="o">=</span><span class="mf">90.7</span>
<span class="n">Field</span> <span class="n">Quality</span> <span class="n">y1_state_name</span><span class="o">=</span><span class="mi">100</span>
<span class="n">Field</span> <span class="n">Quality</span> <span class="n">n1</span><span class="o">=</span><span class="mf">98.7</span>
<span class="n">Field</span> <span class="n">Quality</span> <span class="n">n2</span><span class="o">=</span><span class="mf">97.8</span>
<span class="n">Field</span> <span class="n">Quality</span> <span class="n">AGI</span><span class="o">=</span><span class="mf">89.1</span>
<span class="n">UNIQUE</span> <span class="n">VALUES</span><span class="p">:</span> <span class="n">Top</span> <span class="mi">5</span> <span class="n">Per</span> <span class="n">Field</span>
<span class="n">Field</span> <span class="n">y2_statefips</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">09</span> <span class="n">has</span> <span class="mi">56</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">19</span> <span class="n">has</span> <span class="mi">56</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">18</span> <span class="n">has</span> <span class="mi">56</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">17</span> <span class="n">has</span> <span class="mi">56</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">16</span> <span class="n">has</span> <span class="mi">56</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">y1_statefips</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">97</span> <span class="n">has</span> <span class="mi">35</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">96</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">05</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">40</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">04</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">y1_state</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">al</span> <span class="n">has</span> <span class="mi">22</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">az</span> <span class="n">has</span> <span class="mi">22</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">hi</span> <span class="n">has</span> <span class="mi">22</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">ar</span> <span class="n">has</span> <span class="mi">22</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="ow">in</span> <span class="n">has</span> <span class="mi">22</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">y1_state_name</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">missouri</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">maryland</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">washington</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">pennsylvania</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">wisconsin</span> <span class="n">has</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">n1</span>
<span class="n">UV</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="n">has</span> <span class="mi">13</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">97</span> <span class="n">has</span> <span class="mi">8</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">59</span> <span class="n">has</span> <span class="mi">6</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">27</span> <span class="n">has</span> <span class="mi">5</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">30</span> <span class="n">has</span> <span class="mi">5</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">n2</span>
<span class="n">UV</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="n">has</span> <span class="mi">13</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">57</span> <span class="n">has</span> <span class="mi">5</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="o">-</span><span class="n">empty</span><span class="o">-</span> <span class="n">has</span> <span class="mi">5</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">33</span> <span class="n">has</span> <span class="mi">5</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">172</span> <span class="n">has</span> <span class="mi">4</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">AGI</span>
<span class="n">UV</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="n">has</span> <span class="mi">13</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="o">-</span><span class="n">empty</span><span class="o">-</span> <span class="n">has</span> <span class="mi">5</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">6258</span> <span class="n">has</span> <span class="mi">2</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">111795</span> <span class="n">has</span> <span class="mi">2</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">5351</span> <span class="n">has</span> <span class="mi">2</span> <span class="n">instances</span>
<span class="n">UNIQUE</span> <span class="n">VALUES</span><span class="p">:</span> <span class="n">Bottom</span> <span class="mi">5</span> <span class="n">Per</span> <span class="n">Field</span>
<span class="n">Field</span> <span class="n">y2_statefips</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">state</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">non</span><span class="o">-</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">migrants</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">1</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">21</span> <span class="n">has</span> <span class="mi">49</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">y1_statefips</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">1598458</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">46630</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="o">-</span><span class="n">empty</span><span class="o">-</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">50</span> <span class="n">has</span> <span class="mi">17</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">11</span> <span class="n">has</span> <span class="mi">17</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">y1_state</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">95832</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="o">-</span><span class="n">empty</span><span class="o">-</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">3579600</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">vt</span> <span class="n">has</span> <span class="mi">17</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">nd</span> <span class="n">has</span> <span class="mi">17</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">y1_state_name</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">ky</span> <span class="n">non</span><span class="o">-</span><span class="n">migrants</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">co</span> <span class="n">non</span><span class="o">-</span><span class="n">migrants</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">ca</span> <span class="n">total</span> <span class="n">migration</span><span class="o">-</span><span class="n">us</span> <span class="ow">and</span> <span class="n">foreign</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">ca</span> <span class="n">total</span> <span class="n">migration</span><span class="o">-</span><span class="n">us</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="n">ca</span> <span class="n">total</span> <span class="n">migration</span><span class="o">-</span><span class="n">foreign</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">n1</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">64</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">995</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">624</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">628</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">719</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">n2</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">97</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">1541</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">1156</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">1115</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">1141</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">Field</span> <span class="n">AGI</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">2980</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">29990</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">144141</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">196950</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">UV</span><span class="p">:</span> <span class="mi">1016401</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">SPECIAL</span> <span class="n">CHARACTERS</span>
<span class="n">SpecChar</span> <span class="n">ascii_234</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">SpecChar</span> <span class="n">unicode_8252</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">SpecChar</span> <span class="n">ascii_167</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">SpecChar</span> <span class="n">unicode_9658</span> <span class="n">has</span> <span class="mi">1</span> <span class="n">instances</span>
<span class="n">CoValues</span> <span class="p">(</span><span class="mi">20</span> <span class="n">values</span> <span class="nb">max</span><span class="p">):</span> <span class="n">y1_state</span><span class="p">,</span><span class="n">y1_state_name</span>
<span class="n">mo_missouri</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">md_maryland</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">wa_washington</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">pa_pennsylvania</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">wi_wisconsin</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">sd_south</span> <span class="n">dakota</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">me_maine</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">mi_michigan</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">sc_south</span> <span class="n">carolina</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">oh_ohio</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">nv_nevada</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">ny_new</span> <span class="n">york</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">va_virginia</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">fr_foreign</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">nj_new</span> <span class="n">jersey</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">la_louisiana</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">wy_wyoming</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">ms_mississippi</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">tn_tennessee</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
<span class="n">tx_texas</span><span class="p">:</span> <span class="mi">18</span> <span class="n">instances</span>
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="multi-threading">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Multi_Threading</a><a class="headerlink" href="#multi-threading" title="Link to this heading">#</a></h2>
<p>Multi-threaded functions are built-in for AnalyzeQuality. To use it, you need to supply a license and a licenseId in the ‘settings’ dictionary. You obtain
the license from Technik Interlytics with a suitable paid subscription plan. An evaluation license can be used with limited capability by supplying “VerityTrial”
as the license (no licenseId is needed). We can use the same example as above but with modified settings to enable multi-threading.</p>
<p>With a full license, you can set several parameters to control the number and assignment of threads. Note that the actual number of threads and
the number of records assigned to each thread in each cycle is determined at run-time. These settings, and the limits with a Trial license, are the
starting values for the run-time calculation.</p>
<blockquote>
<div><ul class="simple">
<li><p>maxThreads- maximum number of threads to use</p></li>
<li><p>nRecsPerThreadMin- minimum number of records to assign to each thread in each cycle</p></li>
<li><p>nRecsPerThreadMax- maximum number of records to assign to each thread in each cycle</p></li>
<li><p>useThreads- boolean whether to use multi-threading. Must be ‘true’ to more than 1 thread to be used</p></li>
</ul>
</div></blockquote>
<p>The Trial license imposes limits:</p>
<blockquote>
<div><ul class="simple">
<li><p>maxThreads- 3</p></li>
<li><p>nRecsPerThreadMax- 50</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Console.WriteLine(&quot;\n\nTest 2: Multi-thread with TRIAL license&quot;);
//add parameters
parameters[&quot;license&quot;] = &quot;VerityTrial&quot;;
parameters[&quot;licenseid&quot;] = &quot;&quot;;
parameters[&quot;maxThreads&quot;] = &quot;5&quot;; //will be ignored due to trial license
parameters[&quot;nRecsPerThreadMin&quot;] = &quot;500&quot;; //will be ignored due to trial license
parameters[&quot;nRecsPerThreadMax&quot;] = &quot;10000&quot;; //will be ignored due to trial license
parameters[&quot;useThreads&quot;] = &quot;true&quot;; //multi-threading is used

errs.Clear();
//perform Verity Analysis. We do not use coValues in this example so send an empty container
qualityAnalysis = AnalyzeQuality.Inspect(srcFields, new List&lt;Dictionary&lt;string, string&gt;&gt;(), parameters, recs);
if (qualityAnalysis.status.StartsWith(&quot;notok:&quot;)) throw new Exception($&quot;error doing AnalyzeQuality: {qualityAnalysis.status[6..]}&quot;);
else if (!qualityAnalysis.status.StartsWith(&quot;license trial:&quot;)) throw new Exception($&quot;error doing AnalyzeQuality report status does not start with license trial: {qualityAnalysis.status}&quot;);
else Console.WriteLine($&quot;AnalyzeQuality with threads trial license status: {qualityAnalysis.status}&quot;);
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Test</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Multi</span><span class="o">-</span><span class="n">thread</span> <span class="k">with</span> <span class="n">TRIAL</span> <span class="n">license</span>
<span class="n">AnalyzeQuality</span> <span class="k">with</span> <span class="n">threads</span> <span class="n">trial</span> <span class="n">license</span> <span class="n">status</span><span class="p">:</span> <span class="n">license</span> <span class="n">trial</span><span class="p">:</span><span class="c1">#threads=3, recsPerT=50, #recsIn=1003</span>
<span class="n">Analyze</span> <span class="k">with</span> <span class="n">threads</span> <span class="n">TRIAL</span> <span class="n">license</span> <span class="mi">0</span> <span class="n">errors</span>  <span class="o">---&gt;</span> <span class="n">OK</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="next">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Next</a><a class="headerlink" href="#next" title="Link to this heading">#</a></h2>
<p>See Normalize &amp; Enrich Data Records for examples of how to use the analysis
results to remediate, normalize, and enrich the data.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="functions.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Functions</p>
      </div>
    </a>
    <a class="right-next"
       href="normalizeenrichdatarecords.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Normalize &amp; Enrich Data Records</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#goal">Goal</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practice-continual-improvement">Practice Continual Improvement</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-data-file">Read Data File</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-field-characteristics">Add Field Characteristics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#specify-covalues-to-analyze">Specify CoValues to Analyze</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-parameters-and-do-analysis">Set Parameters and Do Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-results">Test Results</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#review-results">Review Results</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-threading">Multi_Threading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next">Next</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Technik Interlytics.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><!--show release-->
20240811</div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>