<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VerityPy: VerityPy.processing.remediateparsing Namespace Reference</title>
<link rel="icon" href="ti_logo.jpg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">VerityPy<span id="projectnumber">&#160;1.1</span>
   </div>
   <div id="projectbrief">Python library for Verity data profiling, quality control, remediation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_verity_py.html">VerityPy</a></li><li class="navelem"><a class="el" href="namespace_verity_py_1_1processing.html">processing</a></li><li class="navelem"><a class="el" href="namespace_verity_py_1_1processing_1_1remediateparsing.html">remediateparsing</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">VerityPy.processing.remediateparsing Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aabedbc29a184e4c541e44da7605cdcaf" id="r_aabedbc29a184e4c541e44da7605cdcaf"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aabedbc29a184e4c541e44da7605cdcaf">shift_array_entries</a> (list origvals, list recflds, dict hashrecflds, list pinflds)</td></tr>
<tr class="separator:aabedbc29a184e4c541e44da7605cdcaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78bb6b48adc4d77f611cafc45d15a3f9" id="r_a78bb6b48adc4d77f611cafc45d15a3f9"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78bb6b48adc4d77f611cafc45d15a3f9">fix_record_field_split</a> (dict settings, list srcfields, list srcrecs)</td></tr>
<tr class="separator:a78bb6b48adc4d77f611cafc45d15a3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a06ca81d012b88a2079dcffd644cc46a5" id="r_a06ca81d012b88a2079dcffd644cc46a5"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06ca81d012b88a2079dcffd644cc46a5">DQ</a> = &quot;\&quot;&quot;</td></tr>
<tr class="separator:a06ca81d012b88a2079dcffd644cc46a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Remediate Parsing

Remediates (i.e fixes) records that parse incorrectly leading to incorrect number of field values relative to number fields in schema. 
This has three types:
    big: too many field values typically due to embedded delimiters in some field values
    small1: too few fields by 1 which can either be an error or acceptable since some databases intentionally drop last field if it is empty setting it as null
    small2: too few fields by 2 or more typically caused by line feeds in fields or problems exporting records across data system types
This class detects and corrects these errors making new records that are correct
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a78bb6b48adc4d77f611cafc45d15a3f9" name="a78bb6b48adc4d77f611cafc45d15a3f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78bb6b48adc4d77f611cafc45d15a3f9">&#9670;&#160;</a></span>fix_record_field_split()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list fix_record_field_split </td>
          <td>(</td>
          <td class="paramtype">dict</td>          <td class="paramname"><span class="paramname"><em>settings</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>srcfields</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>srcrecs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Fix Record Field Splitting

Repairs records with parsing problems having too many or too few field values relative to defined 
number of fields. This occurs due to embedded delimiters in some field values causing too many parsed values, 
and records broken across multiple lines causing too few values. These situations are categorized into 3 types:
1) big (too many parsed values), 2) small1 (1 too few values), 3) small2 (2 or more too few values). small1 is a 
special case since some data systems purposefully eliminate the fnal field value in a record if it is empty by 
making it null thereby saving storage and memory space. In this case, the record is actually fine but is missing its final 
field value. This can be accepted by having the setting 'allowLastEmpty' = TRUE leading to a default value assigned 
to this last record field based on datatype: int and real assigned 0, bool assigned FALSE, others assigned empty string.

    * settings: Dictionary of setting parameters. Both key and value are strings. Settings:
        - allow_last_empty: bool whether to allow last field to be empty (i.e. small1 parsing) and assign it default value. Default is TRUE
        - is_quoted: bool whether fields values may be enclosed by double quotes as is common when data exported from SpreadSheets and some databases. Default is FALSE.
        - has_header: bool whether first non-empty record is a header row of delimited field titles. Default is FALSE.
        - ignore_empty: bool whether to ignore empty records. Default is TRUE.
        - pin_fields: field titles delimited by pipe (if more than 1) that are pinned meaning if record has too many fields (i.e. big) then these fields will not shifted as 
                the algorithm finds the best way to merge values to make corrected record
        - ignore_start_str: string parts delimited by pipe (if more than 1) that will cause records starting with any one of them to be ignored. Always case insensitive. 
                A common use for this is to filter out comment lines such as those starting with # or // in which case set to #|//
        - delim: name of delimiter to use to parse records: comma, pipe, tab, colon, caret. This is required.
        - join_char: token (max 10 chars) or alias to insert when joining lines to remediate parsing. Default is to use nothing. 
                            Aliases include: -comma-, -tab-, -pipe-, -space-, -bslash-, -fslash-, -lparen-, -rparen-, 
                            -lcurly-, -rcurly-, -lsquare-, -rsquare-, -dblquote-, -mathpi-, -mathe-
    * srcfields: list of Field objects comprising records
    * srcrecs: list of string source records

returns: list of new records. If error, 0th entry starts with notok: otherwise 0th entry is string of stats, 
    entry[1] is header of field titles. For stats, examples may have prefix of (nline) with nline being the line number read 
    (excluding empty and comments lines) and is therefore 1 larger than the line's index 
    in the Python list (i.e. nline is 1 based while lists are 0-based).
</pre> 
<p class="definition">Definition at line <a class="el" href="remediateparsing_8py_source.html#l00351">351</a> of file <a class="el" href="remediateparsing_8py_source.html">remediateparsing.py</a>.</p>

</div>
</div>
<a id="aabedbc29a184e4c541e44da7605cdcaf" name="aabedbc29a184e4c541e44da7605cdcaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabedbc29a184e4c541e44da7605cdcaf">&#9670;&#160;</a></span>shift_array_entries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list shift_array_entries </td>
          <td>(</td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>origvals</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>recflds</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict</td>          <td class="paramname"><span class="paramname"><em>hashrecflds</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>pinflds</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Shifts array of parsed field values to correct having more values than defined fields. 
    Uses algorithm assessing best field and field + 1 (index positions in record) to join 
    based on datatypes, formats and known patterns of root causes of this error.

* origvals: array of parsed field values
    * recflds: list of Field object containing datatype and format specifications
    * hashrecflds: Dictionary of field title lowercase to its array index
    * pinflds: optional list of field titles that are pinned meaning their position cannot be changed
    
returns: new array of parsed field values. If error, 0th entry starts with notok:
</pre> 
<p class="definition">Definition at line <a class="el" href="remediateparsing_8py_source.html#l00024">24</a> of file <a class="el" href="remediateparsing_8py_source.html">remediateparsing.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a06ca81d012b88a2079dcffd644cc46a5" name="a06ca81d012b88a2079dcffd644cc46a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ca81d012b88a2079dcffd644cc46a5">&#9670;&#160;</a></span>DQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str DQ = &quot;\&quot;&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="remediateparsing_8py_source.html#l00022">22</a> of file <a class="el" href="remediateparsing_8py_source.html">remediateparsing.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 11 2024 21:35:50 for VerityPy by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
